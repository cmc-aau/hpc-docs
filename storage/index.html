
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="User guide for the BioCloud HPC at the section of Biotechnology at Aalborg University">
      
      
        <meta name="author" content="Kasper Skytte Andersen">
      
      
      
        <link rel="prev" href="../guides/sshdslurm/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Storage - BioCloud HPC user guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#storage" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="BioCloud HPC user guide" class="md-header__button md-logo" aria-label="BioCloud HPC user guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BioCloud HPC user guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Storage
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/cmc-aau/biocloud-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    cmc-aau/biocloud-docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="BioCloud HPC user guide" class="md-nav__button md-logo" aria-label="BioCloud HPC user guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    BioCloud HPC user guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/cmc-aau/biocloud-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    cmc-aau/biocloud-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Access
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Access
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../access/ssh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shell access through SSH
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../access/webportal/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interactive Web portal (OpenOndemand)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Resource management
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Resource management
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../slurm/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction to SLURM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../slurm/jobsubmission/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Job submission
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../slurm/partitions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hardware partitions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../slurm/efficiency/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimizing CPU efficiency
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../slurm/accounting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage accounting and priority
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../slurm/jobcontrol/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Job control and useful commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../slurm/other/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Other commands / FAQ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Software
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Software
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../software/conda/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conda environments
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../software/containers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Containers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../software/modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modules (LMOD)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Interactive Web portal (OpenOndemand)
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Interactive Web portal (OpenOndemand)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/webportal/files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    File browser
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/webportal/jobqueue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Job queue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/webportal/shell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shell access
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_4" >
        
          
          <label class="md-nav__link" for="__nav_5_1_4" id="__nav_5_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Interactive apps
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_4">
            <span class="md-nav__icon md-icon"></span>
            Interactive apps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/webportal/apps/virtualdesktop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtual Desktop
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/webportal/apps/jupyter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jupyter notebook
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/webportal/apps/rstudio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RStudio
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/webportal/apps/coder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code server
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Snakemake
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Snakemake
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/snakemake/intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/snakemake/tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workflow tutorial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/snakemake/biocloud/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running Snakemake workflows on SLURM clusters
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guides/sshdslurm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interactive VS Code session in a SLURM job
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Storage
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Storage
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network-storage-mount-points" class="md-nav__link">
    <span class="md-ellipsis">
      Network storage mount points
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#local-scratch-space" class="md-nav__link">
    <span class="md-ellipsis">
      Local scratch space
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#temporary-space" class="md-nav__link">
    <span class="md-ellipsis">
      Temporary space
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Storage policy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#moving-large-amounts-of-data-around" class="md-nav__link">
    <span class="md-ellipsis">
      Moving large amounts of data around
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices-with-ceph-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Best practices with Ceph storage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best practices with Ceph storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#avoid-numerous-small-files-at-all-costs" class="md-nav__link">
    <span class="md-ellipsis">
      Avoid numerous small files at all costs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avoid-using-ls-l" class="md-nav__link">
    <span class="md-ellipsis">
      Avoid using ls -l
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtaining-the-total-size-of-folders" class="md-nav__link">
    <span class="md-ellipsis">
      Obtaining the total size of folders
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shared-folders" class="md-nav__link">
    <span class="md-ellipsis">
      Shared folders
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network-storage-mount-points" class="md-nav__link">
    <span class="md-ellipsis">
      Network storage mount points
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#local-scratch-space" class="md-nav__link">
    <span class="md-ellipsis">
      Local scratch space
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#temporary-space" class="md-nav__link">
    <span class="md-ellipsis">
      Temporary space
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Storage policy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#moving-large-amounts-of-data-around" class="md-nav__link">
    <span class="md-ellipsis">
      Moving large amounts of data around
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices-with-ceph-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Best practices with Ceph storage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best practices with Ceph storage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#avoid-numerous-small-files-at-all-costs" class="md-nav__link">
    <span class="md-ellipsis">
      Avoid numerous small files at all costs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#avoid-using-ls-l" class="md-nav__link">
    <span class="md-ellipsis">
      Avoid using ls -l
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obtaining-the-total-size-of-folders" class="md-nav__link">
    <span class="md-ellipsis">
      Obtaining the total size of folders
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shared-folders" class="md-nav__link">
    <span class="md-ellipsis">
      Shared folders
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="storage">Storage</h1>
<p>All nodes are connected to a Ceph network storage cluster through a few different mount points for different purposes, listed below. Data is stored with 3x replication to protect against data loss or corruption due to hardware and disk failures. The data is <strong>NOT backed up</strong> anywhere, however, which means it's not protected against human errors. If you delete data, it's gone and cannot be restored! Some mount points are therefore mounted read-only, but your own data is your responsibility alone. So be careful, also when sharing data with other users when doing shared projects etc.</p>
<p>Data on the Ceph network storage cluster is lightly compressed at rest, so manually compressing files is not needed, however it can be beneficial in many ways to reduce the number of files.</p>
<h2 id="network-storage-mount-points">Network storage mount points</h2>
<table>
<thead>
<tr>
<th>Mount point</th>
<th>Permissions</th>
<th>Contents</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/home</code></td>
<td>Read/write on your own home folder only</td>
<td>All data for individual projects and generally most things should go here</td>
</tr>
<tr>
<td><code>/projects</code></td>
<td>Read/write</td>
<td>All data for shared projects should go here</td>
</tr>
<tr>
<td><code>/databases</code></td>
<td>Read-only</td>
<td>Various databases required for bioinformatic tools</td>
</tr>
<tr>
<td><code>/raw_data</code></td>
<td>Read-only</td>
<td>Raw data (mostly from DNA sequencing) that should never be touched nor deleted</td>
</tr>
<tr>
<td><code>/incoming</code></td>
<td>Read/write</td>
<td>Incoming raw data that should be moved and organized in <code>/raw_data</code> as soon as possible</td>
</tr>
<tr>
<td><code>/nanopore</code></td>
<td>Read/write</td>
<td>Incoming raw data from nanopore sequencing that should be moved and organized in <code>/raw_data</code> as soon as possible. This mount <strong>will be removed</strong> in the near future, please use <code>/incoming</code> instead.</td>
</tr>
</tbody>
</table>
<details open="open">
<summary>Max file size</summary>
<p>There is a max file size of 4TB on the Ceph network cluster, which cannot be increased, <a href="https://docs.ceph.com/en/latest/cephfs/administration/#maximum-file-sizes-and-performance">details here</a>.</p>
</details>
<h2 id="local-scratch-space">Local scratch space</h2>
<p>For jobs requiring heavy I/O where large amounts of data or thousands of temporary files need to be written, it's important to avoid using the network storage (if possible) and instead write to a local harddrive instead, which both avoids overloading the network and the storage cluster itself, but is also much faster in some cases. When deciding whether you need local scratch space, both the size of the data as well as the number of files are important, however the ladder is by far the most important because it has the biggest impact on the performance of the storage cluster overall, <a href="#avoid-numerous-small-files-at-all-costs">more info below</a>.</p>
<p>Local scratch space is always mounted at the same moint point on all machines, which is under <code>/scratch</code>. It's not available on all compute nodes (refer to <a href="../slurm/partitions/">hardware partitions</a>), however, so if you need it you must ensure that you submit jobs to specific compute nodes using the <code>--nodelist</code> option to the <code>srun</code>, <code>sbatch</code>, and <code>salloc</code> commands. </p>
<p>All data owned by your user anywhere under <code>/scratch</code> on a particular compute node is <strong>automatically deleted</strong> after the last SLURM job run by your user has finished. Therefore ensure to move files elsewhere as the last step of the job if needed, otherwise it will be lost. When using scratch space please create a separate folder there to work in, preferably just named by your username, so that data from other users' jobs that may also use the <code>/scratch</code> folder are not overwritten or otherwise impacted by your jobs.</p>
<h2 id="temporary-space">Temporary space</h2>
<p>Each job will have a separate and entirely private mount point for temporary data (default location is usually <code>/tmp</code> or <code>/var/tmp</code>), which will be automatically deleted after each job. On compute nodes with extra local scratch space it will automatically be mounted somewhere in there instead, so that there is a lot more space available for temporary files on those nodes (refer to <a href="../slurm/partitions/">hardware partitions</a>).</p>
<p>If you would need more space for temporary data on compute nodes that have no extra local scratch space, or you need even more temporary space than there's available on local scratch space, it's possible to place it on the Ceph network storage as well. However, if you choose to do so, please see the <a href="#avoid-numerous-small-files-at-all-costs">best practices</a> below. It can simply be done by for example setting the environment variable <code>TMPDIR</code> early in the batch script by adding a line, fx <code>export TMPDIR=${HOME}/tmp</code>. Ensure no conflicts can occur within the folder(s) if you run multiple jobs on multiple different compute nodes at once.</p>
<h2 id="storage-policy">Storage policy</h2>
<p><strong>Your data - your responsibility!</strong></p>
<p>The Ceph network storage is <strong>NOT</strong> a long-term storage or backup solution. <strong>EVERYTHING IS TEMPORARY, SO CLEAN UP AFTER YOURSELF IMMEDIATELY AFTER EACH JOB!!</strong> You will likely forget about it very quickly after you've done your work, so make it a habit to cleanup shortly after every job. Once studies are published, delete all the data and ensure that for example raw DNA sequencing data is uploaded to public archives and that the corresponding code to produce results in the studies is available somewhere, preferably in a GitHub repository.</p>
<p>Furthermore, if you are no longer employed or studying at AAU, your home folder will be <strong>deleted without notice</strong>, and you have the sole responsibility to hand on any data that should be saved for longer by passing it on to other users, for example your PI, <strong>before you leave</strong>.</p>
<h2 id="moving-large-amounts-of-data-around">Moving large amounts of data around</h2>
<p>If you need to move large amounts of data (or numerous files at once regardless of size) it will happen in an instant regardless of the size if you make sure you are doing it on the same filesystem/mount, for example from <code>/projects/xxx</code> to <code>/projects/yyy</code>. However, if you need to move things across mount points, for example from <code>/home/xxx</code> to <code>/projects/yyy</code> please ask an administrator to do it for you, since moving between mount points will happen over the network and cause unneccessary traffic and load on the storage cluster, let alone be very slow. An administrator can move anything instantly anywhere on the storage cluster, but if you need to transfer external files there is no way around it, it will be limited by the network speed.</p>
<h2 id="best-practices-with-ceph-storage">Best practices with Ceph storage</h2>
<h3 id="avoid-numerous-small-files-at-all-costs">Avoid numerous small files at all costs</h3>
<p><strong>Whereever possible always try to write fewer but larger files instead of many small ones</strong>. The Ceph storage cluster uses a file metadata cache server that holds an entry for every single open file, so the cache memory usage is directly proportional to the number of open files (meaning being accessed in any way). If there are too many open files (across <strong>ALL</strong> connected clients/nodes at once) the metadata server will ask clients to release some pressure on the cache and if they fail to do so in time they will simply be <a href="https://docs.ceph.com/en/reef/cephfs/eviction/">evicted</a> without notice (meaning the Ceph cluster will force an unmount). This will happen on any node that tips the iceberg and is thus not a result of the exact storage actions of individual clients but rather that of all nodes connected to the Ceph cluster across the whole university at any one time. See <a href="https://docs.ceph.com/en/reef/cephfs/app-best-practices/">Ceph best usage practices</a> for additional details.</p>
<h3 id="avoid-using-ls-l">Avoid using <code>ls -l</code></h3>
<p>When listing directories, it's common to use <code>ls -l</code> to list things vertically, however this will also request various other information like permissions, file size, owner, group, access time etc. This will burden the metadata servers, especially if used in loops in scripts on many files, so if you don't need all this extra information and just want to list the contents vertically instead of horizontally, just use <code>ls -1</code> instead and make that a habit. Likewise, don't use <code>stat</code> on many files if not neccessary.</p>
<h3 id="obtaining-the-total-size-of-folders">Obtaining the total size of folders</h3>
<p>To obtain the total disk space used of all files inside a folder it's common to use the <code>du -sh /some/folder</code> command. Doing this at a large folder is quite similar to performing a <a href="https://en.wikipedia.org/wiki/Denial-of-service_attack">DDoS attack</a> on the Ceph storage cluster, so please never use <code>du</code> on folders, only on individual files. It will likely never finish anyways if the folder contains many files. The best way to obtain the size of a folder is to instead obtain the information in the form of storage quota attributes directly from the Ceph metadata servers using the custom <code>storagequota</code> command as demonstrated below, which is both instant and will not cause any stress on the cluster:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a># home folder
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>$ storagequota
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>Storage quota used for &#39;/home/bio.aau.dk/abc&#39;: 3.46TB / 9.09TB (38.06%)
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a># specific folder
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>$ storagequota /projects
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>Storage quota used for &#39;/projects&#39;: 397.54TB
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a># multiple folders, sorted by size
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>storagequota /projects/* | sort -rt &#39;:&#39; -k2 -n | head -n 5
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>Storage quota used for &#39;/projects/microflora_danica&#39;:       208.40TB
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>Storage quota used for &#39;/projects/MiDAS&#39;:       125.75TB
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>Storage quota used for &#39;/projects/NNF_AD_2023&#39;:     30.66TB
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>Storage quota used for &#39;/projects/glomicave&#39;:       8.84TB
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>Storage quota used for &#39;/projects/dark_science&#39;:    7.19TB
</span></code></pre></div>
<p>The <code>storagequota</code> command is simply a convenient wrapper script around the <code>getfattr</code> command, which retrieves attributes of files and folders directly from the Ceph MDS servers. It only retrieves the size of the folder, but there are also a few other attributes that may be of interest, for example the number of files, see examples below.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>$ getfattr -n ceph.dir.rfiles /projects 
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>getfattr: Removing leading &#39;/&#39; from absolute path names
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a># file: projects
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>ceph.dir.rfiles=&quot;219203126&quot;
</span></code></pre></div>
<details>
<summary>Additional Ceph attributes</summary>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Explaination</th>
</tr>
</thead>
<tbody>
<tr>
<td>ceph.dir.entries</td>
<td></td>
</tr>
<tr>
<td>ceph.dir.files</td>
<td>Number of files in folder (non-recursive)</td>
</tr>
<tr>
<td>ceph.dir.subdirs</td>
<td>Number of subdirs (non-recursive)</td>
</tr>
<tr>
<td>ceph.dir.rentries</td>
<td></td>
</tr>
<tr>
<td>ceph.dir.rfiles</td>
<td>Number of files in folder (recursive)</td>
</tr>
<tr>
<td>ceph.dir.rsubdirs</td>
<td>Number of folders in folder (recursive)</td>
</tr>
<tr>
<td>ceph.dir.rbytes</td>
<td>Size of folder (recursive)</td>
</tr>
<tr>
<td>ceph.dir.rctime</td>
<td>Recently changed time (non-recursive)</td>
</tr>
</tbody>
</table>
<p>There are no descriptions on these in the Ceph documentation or anywhere else, I've simply found them in the Ceph source code! This is all there is.</p>
</details>
<h2 id="shared-folders">Shared folders</h2>
<p>If you need to give other users write access to a file/folder that you own, you need to set the group ownership of the folder to the <code>bio_server_users@bio.aau.dk</code> group and set the <a href="https://www.geeksforgeeks.org/setuid-setgid-and-sticky-bits-in-linux-file-permissions/">setGID</a> bit on folders (to ensure child files/folders will inherit the ownership of a parent folder), see the example below. This will give <strong>everyone</strong> with access to the BioCloud servers full control of the files. If you only want a specific group of people to have write access, there is only one way to do that, which is to contact the university IT services to create an email address group for the specific users, and then follow the same steps below, but instead use the new email of that group.</p>
<p><strong>Never</strong> use <code>chmod 777</code>. It's a major security weakness that can allow anyone (even users outside of the university authentication system, human or not) to do anything they want with a file/folder and potentially place hidden payload there. Folders will be scanned regularly for insecure permissions and corrected without notice. Only <code>owner</code> and <code>group</code> should have the execute bit set, never <code>other</code>. See <a href="https://www.geeksforgeeks.org/permissions-in-linux/">permissions in Linux</a> to learn about file and folder permissions on Linux systems.</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>folder=&quot;some_folder/&quot;
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a># create the folder if it doesn&#39;t exist already
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>mkdir -p &quot;$folder&quot;
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a># set group ownership
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>chown -R :bio_server_users@bio.aau.dk &quot;$folder&quot;
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a># If there are already files with weak permissions, correct them with:
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>chmod -R o-x &quot;$folder&quot;
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a># Ensure group can edit files/folders:
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>find &quot;$folder&quot; -type f -exec chmod 664 {} \;
</span><span id="__span-2-14"><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>find &quot;$folder&quot; -type d -exec chmod 775 {} \;
</span><span id="__span-2-15"><a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>
</span><span id="__span-2-16"><a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a># set the setGID sticky bit to ensure new files and folders inherit group ownership
</span><span id="__span-2-17"><a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>chmod 2775 &quot;$folder&quot;
</span></code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../guides/sshdslurm/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Interactive VS Code session in a SLURM job">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Interactive VS Code session in a SLURM job
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "navigation.footer"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>